---
layout: post
title: 一致性校验
categories:
  - Application
published: true
---

分布式系统数据数据一致性

## 业务侧系统保证最终一致性

### 核心思想

通过业务系统的服务保证数据的最终一致性，业务系统侧系统记录每一次具体业务操作的执行流水日志信息，并且对没有全部成功的变更结果，触发执行数据一致性的校验核对。

### 设计原则

1. 根据业务操作标识和业务操作唯一ID实现接口的幂等设计
2. 实时的同步检查核对、准实时的异步检查核对、定时任务的异步检查核对

### 流程图

1. 同步执行
![](/assets/images/2023-06/业务侧-同步.png)

2. 异步核对
![](/assets/images/2023-06/业务侧-异步.png)

## 平台侧系统保证最终一致性

### 核心思想

平台侧系统的每一次数据变更，主动寻找业务侧系统，确认本次数据变更结果

### 设计的基本原则

1. 根据业务操作标识和唯一ID做幂等设计

### 流程图

1. 同步核对
![](/assets/images/2023-06/平台侧-同步.png)

2. 异步核对
![](/assets/images/2023-06/平台侧-异步.png)